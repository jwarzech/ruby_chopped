#!/usr/bin/env ruby

$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'ruby_chopped'
require 'optparse'

@options = {}
parser = OptionParser.new do |o|
  o.on('-n', '--name [name]', 'name of project to create') do |n|
    @options[:name] = n
  end
  o.on('-f', '--force', 'force overwriting existing project') do
    @options[:force] = true
  end
  
  o.on('-l', '--limit [limit]', 'number of gems to add to the basket') do |l|
    @options[:limit] = l
  end
end
parser.parse!

# Allow for old syntax of ruby_chopped new name
# At some point we'll do away with this entirely
unless @options[:name]
  if ARGV.shift == "new" && ARGV.first
    @options[:name] = ARGV.first
  end
end

unless @options[:name]
  puts parser
  exit 1
end

RubyChopped.create(@options)
